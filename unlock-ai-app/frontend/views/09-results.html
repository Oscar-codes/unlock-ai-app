<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantalla 9 - Resultados</title>
  <link href="../assets/styles/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/styles/results.css" rel="stylesheet">
</head>
<body>

  <!-- Marca -->
  <header class="d-flex justify-content-end p-3">
    <span class="site-brand">Ai.kodigo.org</span>
  </header>

  <main class="results-main text-center">

    <!-- Robot -->
    <div class="robot-space d-flex align-items-center justify-content-center">
      <span>Espacio para robot</span>
    </div>

    <!-- Burbuja -->
    <div class="chat-container">
      <div class="chat-bubble">
        La información ha sido extraída exitosamente,<br>
        puedes revisar el resultado escaneando el siguiente QR
      </div>
    </div>

    <!-- QR -->
    <div class="qr-container">
      <img src="../assets/images/sample-qr.png" alt="QR resultado">
    </div>

    <!-- Tabla de resultados -->
    <div class="table-container">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
            <th>Nº</th>
            <th>Nombres</th>
            <th>Apellidos</th>
            <th>DUI</th>
            <th>Teléfono</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td><td>Juan Alfredo</td><td>Guzmán Hernández</td><td>25469812-7</td><td>7625-8569</td>
          </tr>
          <tr>
            <td>2</td><td>José Mauricio</td><td>Montalvo Arzú</td><td>04658972-6</td><td>7988-5542</td>
          </tr>
          <tr>
            <td>3</td><td>Carlos Amílcar</td><td>Gómez Padilla</td><td>68975248-7</td><td>6879-6985</td>
          </tr>
          <tr>
            <td>4</td><td>Ana María</td><td>Lagos Pérez</td><td>26589754-0</td><td>7522-3369</td>
          </tr>
          <tr>
            <td>5</td><td>Miriam Noemí</td><td>Bátrez Artiga</td><td>56985678-9</td><td>2365-4568</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Botón -->
    <button class="btn btn-next" onclick="location.href='./10-learnmore.html'">Siguiente <span class="arrow">→</span></button>

  </main>

  <!-- Footer -->
  <footer class="agent-footer">
    <div class="footer-overlay">
      <img src="../assets/images/unlock-icon-black.png" alt="Unlock AI by Kodigo" class="footer-logo">
    </div>
  </footer>

  <script src="../assets/scripts/bootstrap.bundle.min.js"></script>
  <script>
    // Obtener el ID del documento seleccionado desde sessionStorage
    const selectedDocId = sessionStorage.getItem('selectedDocId');

    // Datos quemados para cada documento
    const documentData = {
      curriculos: {
        title: 'Currículum Vitae',
        description: 'Documento de contabilidad minimalista.',
        url: 'https://res.cloudinary.com/dmddi5ncx/image/upload/v1759012835/samples/unlockIA/Curr%C3%ADculum_Vitae_Cv_de_Contabilidad_Minimalista_Azul_ycrjjl.pdf'
      },
      contratos: {
        title: 'Contrato Laboral',
        description: 'Documento estándar para acuerdos laborales.',
        url: 'https://example.com/contrato.pdf'
      },
      formularios: {
        title: 'Formulario de Registro',
        description: 'Formulario para recopilar datos de usuarios.',
        url: 'https://example.com/formulario.pdf'
      }
    };

    // Mostrar los datos del documento seleccionado
    if (selectedDocId && documentData[selectedDocId]) {
      const doc = documentData[selectedDocId];

      if (selectedDocId === 'contratos') {
        document.querySelector('.chat-bubble').innerHTML = `
          <h3>Resumen del Contrato Individual de Trabajo</h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Aspecto Contractual</th>
                <th>Detalle (Patrón/Trabajador)</th>
                <th>Cita(s)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Tipo de Contrato</td><td>Contrato Individual de Trabajo</td><td></td></tr>
              <tr><td>Fecha de Firma</td><td>Veintisiete de enero de dos mil veinte</td><td></td></tr>
              <tr><td>Lugar de Firma</td><td>Chihuahua, Chih.</td><td></td></tr>
              <tr><td>Duración del Contrato</td><td>Tiempo INDETERMINADO</td><td></td></tr>
              <tr><td>Patrón (Nombre)</td><td>Centro de Investigación en Materiales Avanzados, S.C. (CIMAV)</td><td></td></tr>
              <tr><td>Patrón (Giro)</td><td>Realizar investigaciones en materiales avanzados, desarrollo y aplicación de tecnología y programas de docencia</td><td></td></tr>
              <tr><td>Patrón (Domicilio)</td><td>Ave. Miguel de Cervantes Nº 120, Complejo Industrial Chihuahua</td><td></td></tr>
              <tr><td>Trabajador (Características)</td><td>Mexicana, sexo femenino, estado civil “soltera”, xxxx años de edad</td><td></td></tr>
              <tr><td>Puesto</td><td>xxxxxxxxxxxxxxxxxx (Funciones de confianza)</td><td></td></tr>
              <tr><td>Salario Mensual</td><td>$xxxxxxxxxxxxxxxxx</td><td></td></tr>
              <tr><td>Frecuencia de Pago</td><td>Quincenalmente (los días 14 y 29 ó 30), o el día anterior laborable si el día de pago es no laborable</td><td></td></tr>
              <tr><td>Método de Pago</td><td>Por medio de tarjeta electrónica</td><td></td></tr>
              <tr><td>Jornada Laboral (Días)</td><td>Lunes a viernes</td><td></td></tr>
              <tr><td>Jornada Laboral (Horario)</td><td>Inicia a las 8:30 y termina a las 16:30</td><td></td></tr>
              <tr><td>Tiempo de Descanso (Alimentos)</td><td>30 minutos (dentro o fuera de la empresa a elección del trabajador)</td><td></td></tr>
              <tr><td>Descanso Semanal</td><td>Sábado adicional al domingo (en aplicación del Art. 59 de la Ley Federal del Trabajo)</td><td></td></tr>
              <tr><td>Vacaciones Anuales</td><td>20 días laborables al año, divididos en dos periodos</td><td></td></tr>
              <tr><td>Periodos Vacacionales</td><td>Segunda quincena de julio y segunda quincena de diciembre (proporcionalmente a la fecha de ingreso)</td><td></td></tr>
              <tr><td>Aguinaldo</td><td>40 días de salario (o parte proporcional)</td><td></td></tr>
              <tr><td>Fecha Límite de Aguinaldo</td><td>Antes del 20 de diciembre</td><td></td></tr>
              <tr><td>Obligación de Confidencialidad</td><td>El trabajador se obliga a no divulgar datos, información o resultados; esta obligación es de naturaleza permanente y no cesa con la terminación del contrato</td><td></td></tr>
              <tr><td>Normatividad Supletoria</td><td>Ley Federal del Trabajo y/o Reglamento Interior de Trabajo</td><td></td></tr>
            </tbody>
          </table>
        `;
      } else if (selectedDocId === 'informes') {
        document.querySelector('.chat-bubble').innerHTML = `
          <h3>Resumen del Informe Reporte Anual</h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Aspecto del Reporte</th>
                <th>Detalle Específico / Métrica</th>
                <th>Valor o Categoría</th>
                <th>Cita(s)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Título del Reporte</td><td>Identificación de la entidad</td><td>Reporte Financiero Industrias Ariova</td><td></td></tr>
              <tr><td>Métricas Clave</td><td>Porcentaje de Incremento (destacado)</td><td>89 %</td><td></td></tr>
              <tr><td>Métricas Clave</td><td>Dos porcentajes iguales (posiblemente Productividad e Importaciones)</td><td>41 %</td><td></td></tr>
              <tr><td>Métricas Clave</td><td>Un porcentaje adicional relevante</td><td>26 %</td><td></td></tr>
              <tr><td>Ejes de Análisis</td><td>Indicadores de rendimiento cubiertos</td><td>Productividad, Incremento de Predios, Importaciones</td><td></td></tr>
              <tr><td>Estrategias y Gastos</td><td>Áreas financieras mencionadas</td><td>Gastos en Marketing, Publicidad en Redes Sociales</td><td></td></tr>
              <tr><td>Innovación de Productos</td><td>Enfoque de la oferta</td><td>Productos nuevos, Productos innovadores</td><td></td></tr>
              <tr><td>Resumen de Ventas Anuales (2024)</td><td>Participación de ventas por año</td><td>59.3 %</td><td></td></tr>
              <tr><td>Resumen de Ventas Anuales (2023)</td><td>Participación de ventas por año</td><td>29.6 %</td><td></td></tr>
              <tr><td>Resumen de Ventas Anuales (2022)</td><td>Participación de ventas por año</td><td>11.1 %</td><td></td></tr>
              <tr><td>Productos Descontinuados</td><td>Lista de ítems retirados</td><td>Producto 01, Producto 02, Producto 03</td><td></td></tr>
              <tr><td>Visualización de Tendencias</td><td>Periodo proyectado en gráficos</td><td>2022, 2023, 2024, 2025, 2026, 2027</td><td></td></tr>
            </tbody>
          </table>
        `;
      } else if (selectedDocId === 'curriculos') {
        document.querySelector('.chat-bubble').innerHTML = `
          <h3>Resumen del Currículum Vitae de Carla Rodríguez</h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Aspecto del CV</th>
                <th>Detalle Específico</th>
                <th>Cita(s)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Identificación</td><td>Nombre de la titular</td><td>Carla Rodríguez</td></tr>
              <tr><td>Título Profesional</td><td>Nivel de estudios</td><td>LIC. EN CONTABILIDAD</td></tr>
              <tr><td>Área de Interés Principal</td><td>Enfoque profesional</td><td>ÁREA DE CONTABILIDAD</td></tr>
              <tr><td>Resumen Personal (Fragmento)</td><td>Descripción genérica introductoria</td><td>Lorem ipsum dolor sit amet..., Eu augue ut lectus arcu bibendum at varius vel pharetra...</td></tr>
              <tr><td>Educación (Licenciatura)</td><td>Grado obtenido</td><td>Licenciatura en Contabilidad</td></tr>
              <tr><td>Institución (Licenciatura)</td><td>Nombre de la universidad</td><td>Universidad Alta Pinta</td></tr>
              <tr><td>Periodo (Licenciatura)</td><td>Años de estudio</td><td>2010-2014</td></tr>
              <tr><td>Educación (Posgrado/Adicional)</td><td>Grado/Curso</td><td>Diplomado en Finanzas</td></tr>
              <tr><td>Institución (Diplomado)</td><td>Nombre de la universidad</td><td>Universidad Alta Pinta</td></tr>
              <tr><td>Periodo (Diplomado)</td><td>Años de estudio</td><td>2014-2016</td></tr>
              <tr><td>Experiencia Laboral (1)</td><td>Empleador y Periodo</td><td>Empresa Borcelle, 2010-2012</td></tr>
              <tr><td>Experiencia Laboral (2)</td><td>Empleador y Periodo</td><td>Empresa Borcelle, 2012-2014</td></tr>
              <tr><td>Experiencia Laboral (3)</td><td>Empleador y Periodo</td><td>Empresa Borcelle, 2014-2016</td></tr>
              <tr><td>Habilidades (Ejemplos)</td><td>Competencias destacadas</td><td>Liderazgo, Comunicación asertiva, Gestión de activos</td></tr>
              <tr><td>Habilidades (Ejemplos)</td><td>Competencias destacadas</td><td>Resolución de problemas, Elaboración de reportes, Trabajo en equipo</td></tr>
              <tr><td>Contacto (Teléfono)</td><td>Número telefónico</td><td>(55) 1234-5678</td></tr>
              <tr><td>Contacto (Correo)</td><td>Correo electrónico</td><td>hola@sitioincreible.com</td></tr>
              <tr><td>Contacto (Web)</td><td>Sitio web</td><td>www.sitioincreible.com</td></tr>
            </tbody>
          </table>
        `;
      } else if (selectedDocId === 'formularios') {
        document.querySelector('.chat-bubble').innerHTML = `
          <h3>Resumen del Formulario de Inscripción</h3>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Aspecto del Formulario</th>
                <th>Detalle Específico / Título del Campo</th>
                <th>Ubicación o Contexto</th>
                <th>Cita(s)</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>Título Principal</td><td>Identificación del documento</td><td>FORMULARIO DE INSCRIPCIÓN</td><td></td></tr>
              <tr><td>Entidad/Grupo</td><td>Entidad a la que pertenece el formulario</td><td>GRUPO ENSIGNA</td><td></td></tr>
              <tr><td>Estructura</td><td>Bloques de información solicitada</td><td>Información solicitada bloque 1, Información solicitada bloque 2</td><td></td></tr>
              <tr><td>Sección Principal</td><td>Categoría de la información inicial</td><td>Datos personales</td><td></td></tr>
              <tr><td>Campos Solicitados (Identificación)</td><td>Datos requeridos del solicitante</td><td>Nombre y apellidos, DNI</td><td></td></tr>
              <tr><td>Campos Solicitados (Contacto/Ubicación)</td><td>Datos de contacto y residencia</td><td>Correo, Dirección, CP, Ciudad, Móvil</td><td></td></tr>
              <tr><td>Campos Solicitados (Demográficos)</td><td>Datos de origen</td><td>Lugar y fecha de nacimiento</td><td></td></tr>
              <tr><td>Campos Solicitados (Formalidad)</td><td>Elementos de cierre y validación</td><td>Fecha, Firma</td><td></td></tr>
              <tr><td>Información Fija (Contacto de la Entidad)</td><td>Datos de contacto visibles en el formulario</td><td>911-234-567</td><td></td></tr>
              <tr><td>Información Fija (Dirección de la Entidad)</td><td>Dirección de contacto visible</td><td>Calle Cualquiera 123, Cualquier Lugar</td><td></td></tr>
              <tr><td>Información Fija (Web de la Entidad)</td><td>Sitio web visible</td><td>www.unsitiogenial.es</td><td></td></tr>
            </tbody>
          </table>
        `;
      } else {
        document.querySelector('.chat-bubble').textContent = `Información del documento seleccionado: ${doc.title}`;
        document.querySelector('.qr-container').innerHTML = `<a href="${doc.url}" target="_blank">Abrir documento</a>`;
      }
    } else {
      document.querySelector('.chat-bubble').textContent = 'No se seleccionó ningún documento.';
    }

    fetch("http://localhost:3000/procesar-documentos-seleccionados")
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const resultadosContainer = document.querySelector(".table-container tbody");
                resultadosContainer.innerHTML = ""; // Limpiar contenido previo

                data.documentos.forEach((doc, index) => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${doc.name}</td>
                        <td>${doc.text.substring(0, 100)}...</td> <!-- Muestra un resumen -->
                    `;
                    resultadosContainer.appendChild(row);
                });
            } else {
                console.error("Error al procesar documentos:", data.error);
            }
        })
        .catch(error => console.error("Error en la solicitud:", error));
  </script>
</body>
</html>
